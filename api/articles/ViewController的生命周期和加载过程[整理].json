{"title":"ViewController的生命周期和加载过程[整理]","slug":"ViewController的生命周期和加载过程[整理]","date":"2020-02-24T12:53:22.000Z","updated":"2020-02-25T12:59:04.000Z","comments":true,"path":"api/articles/ViewController的生命周期和加载过程[整理].json","excerpt":"点击看详情","covers":null,"content":"<center>点击看详情</center>\n\n<span id=\"more\"></span>\n\n<p>按照执行顺序排列</p>\n<ul>\n<li>initWithCoder：通过nib文件初始化时触发</li>\n<li>awakeFromNib：nib文件被加载的时候，会发送一个awakeFromNib的消息到nib文件中的每个对象<br>PS:<br>从Storyboards中加载的时候，会调用initWithCode，如果不存在则调用init。之后对里面的每个对象调用awakeFromNib方法。<br>从内存中alloc出来的情况下，调init方法。</li>\n</ul>\n<ul>\n<li>loadView：开始加载视图控制器自带的view 来生成UIViewController.view</li>\n<li>viewDidLoad：视图控制器的view被加载完成<br>PS：ViewController查找与其关联的view，其顺序是：<br>1 子类是否重写了loadView，是则直接调用。然后viewDidLoad完成View的加载。<br>2 如果子类没有重写的loadView，则ViewController会从StroyBoards中找或者调用其默认的loadView，默认的loadView返回一个空白的UIView对象<br>2 外部通过调用initWithNibName:bundle 指定nib文件名，ViewController加载此nib来创建View。<br>3 若外部initWithNibName:bundle 的name参数为nil即未指定nib文件名，<br>则ViewController会通过以下两个步骤找到与其关联的nib：<br>a): 如果类名包含Controller，例如ViewController的类名是MyViewController，则查找是否存在MyView.nib<br>b): 找跟ViewController类名一样的文件，例如MyViewController，则查找是否存在MyViewController.nib<br>4  如果子类没有重写的loadView，则ViewController会从StroyBoards中找或者调用其默认的loadView，默认的loadView返回一个空白的UIView对象<br>注：第一步，ViewController是判断子类是否重写了loadView，而不是判断调用子类的loadView之后ViewController的View是否为空。就是说，如果子类重写了loadView的话，不管子类在loadView里面能否获取到View，ViewController都会直接调viewDidLoad完成View的加载</li>\n</ul>\n<ul>\n<li><p>viewWillAppear：视图控制器的view将要显示在window上</p>\n</li>\n<li><p>updateViewConstraints：视图控制器的view开始更新AutoLayout约束</p>\n</li>\n<li><p>viewWillLayoutSubviews：视图控制器的view将要更新内容视图的位置</p>\n</li>\n<li><p>viewDidLayoutSubviews：视图控制器的view已经更新视图的位置</p>\n</li>\n<li><p>viewDidAppear：视图控制器的view已经展现到window上</p>\n</li>\n<li><p>viewWillDisappear：视图控制器的view将要从window上消失</p>\n</li>\n<li><p>viewDidDisappear：视图控制器的view已经从window上消失</p>\n</li>\n<li><p>(void)viewWillUnload;</p>\n</li>\n<li><p>(void)viewDidUnload;<br>PS：view的Load和Unload不是成对调用的。<br>因为viewWillUnload和viewDidUnload这两个函数只在内存警告时被调用。<br>就算强制将viewController的view设为nil也不会触发。<br>如果viewController从创建到销毁期间都没有内存警告，那么这两个函数将始终不会被调用。<br>iOS6已将viewWillUnload和viewDidUnload废弃，原因是UIKit在内存警告的时候已经不会自动释放无用的视图。</p>\n</li>\n<li><p>(void)dealloc;</p>\n</li>\n</ul>\n","categories":[{"name":"iOS","path":"api/categories/iOS.json"}],"tags":[{"name":"iOS","path":"api/tags/iOS.json"}]}